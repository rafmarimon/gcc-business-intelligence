# LinkedIn Content Generation System

## Overview

The LinkedIn Content Generation System is a component of the GCC Business Intelligence Platform that automatically creates professional LinkedIn posts based on the latest news, industry analyses, and updates on USA-UAE relations. This system is designed to produce engaging, informative content with supporting visuals that can be shared directly to LinkedIn.

## Features

- **Automatic Content Generation**: Creates posts daily with specialized formats for weekly and monthly reviews
- **AI-Generated Text**: Uses OpenAI's GPT-4o to create compelling, on-topic content
- **AI-Generated Images**: Creates custom visuals using GPT-4o (primary) or DALL-E 3 (fallback) to accompany each post
- **Scheduled Generation**: Runs on configurable daily, weekly, and monthly schedules
- **Content Management**: View, edit, and manage generated posts through the dashboard
- **Content Types**:
  - Daily posts (multiple formats)
  - "Week in Review" summaries
  - "Month in Review" comprehensive analyses

## Content Types

### Daily Posts

Daily posts are generated in several formats:

1. **General Updates**: Overall business insights and news from UAE/GCC
2. **Market Updates**: Focused on market trends, economic indicators, and conditions
3. **Sector Focus**: In-depth look at specific industries like technology, finance, energy
4. **US-UAE Relations**: Updates on business and diplomatic relations between US and UAE
5. **Investment Opportunities**: Highlights of investment potential in UAE/GCC markets

### Weekly Reviews

Published once a week (default: Friday), these posts summarize the key events and trends of the past week. They offer a comprehensive overview with insights that might have been missed in daily updates.

### Monthly Reviews

Published on the 1st of each month by default, these posts provide higher-level analysis of the past month's developments, focusing on broader trends, significant shifts, and long-term implications.

## Post Structure

Each generated post contains:

1. **Headline**: An attention-grabbing title relevant to the content
2. **Body Text**: AI-generated content focusing on key points and insights
3. **Engagement Question**: A thought-provoking question to drive comments and interaction
4. **Hashtags**: Relevant hashtags to increase visibility (customizable in config)
5. **Visual Content**: An AI-generated image tailored to the post's content (generated by GPT-4o or DALL-E)

## Setup and Configuration

### Prerequisites

- OpenAI API key with access to GPT-4o and DALL-E 3
- Python 3.8 or higher
- Redis (optional, for caching)

### Configuration

The system is configured through the `config/linkedin_config.json` file, which controls:

- Post types to generate
- Hashtags for each post type
- Image settings (style, quality, size)
- Schedule settings
- Prompt templates for images

Example configuration:

```json
{
  "post_types": ["general", "market_update", "sector_focus", "us_uae_relations", "investment_opportunities"],
  "hashtags": {
    "general": ["#UAE", "#GCC", "#BusinessIntelligence", "#UAEBusiness", "#GulfBusiness"]
  },
  "post_frequency": 4,
  "hashtags_per_post": {"min": 3, "max": 7},
  "include_images": true,
  "image_style": "vivid",
  "weekly_schedule": {
    "enabled": true,
    "day": "friday",
    "time": "12:00"
  }
}
```

You can also configure image generation settings through environment variables:

```
USE_GPT4O_IMAGES=true       # Use GPT-4o for image generation (falls back to DALL-E if needed)
GPT4O_IMAGE_MODEL=gpt-4o    # The GPT-4o model to use for image generation
```

### Scheduling

The system uses the `schedule_linkedin.py` script to manage scheduled content generation. You can configure:

- Daily post generation time
- Weekly review day and time
- Monthly review day and time

Environment variables for scheduler:

```
LINKEDIN_DAILY_TIME=08:00
LINKEDIN_WEEKLY_DAY=friday
LINKEDIN_WEEKLY_TIME=09:00
LINKEDIN_MONTHLY_DAY=1
LINKEDIN_MONTHLY_TIME=10:00
```

## API Endpoints

The system provides several API endpoints to interact with LinkedIn content:

### List LinkedIn Posts

`GET /api/linkedin/posts`

Query parameters:
- `type`: Filter by post type (daily, weekly, monthly)
- `limit`: Maximum number of posts to return (default: 10)
- `offset`: Pagination offset (default: 0)
- `search`: Optional search term to filter posts by content

### Generate LinkedIn Posts

`POST /api/linkedin/generate`

Request body:
```json
{
  "post_type": "daily", // or "weekly", "monthly"
  "content_text": "Optional text to generate posts from",
  "client": "general",
  "image_options": {  // Optional
    "prompt": "Custom image prompt override",
    "style": "natural" // or "vivid"
  }
}
```

### Get Specific LinkedIn Post

`GET /api/linkedin/post/<post_id>`

### Delete LinkedIn Post

`DELETE /api/linkedin/post/<post_id>`

### Serve LinkedIn Image

`GET /api/linkedin/images/<filename>`

### Schedule LinkedIn Task

`POST /api/linkedin/schedule`

Request body:
```json
{
  "task_type": "daily", // or "weekly", "monthly"
  "run_now": true // run immediately or just set up schedule
}
```

### Get Image Generation Config

`GET /api/config/image-generation`

Returns:
```json
{
  "use_gpt4o_images": true,
  "gpt4o_image_model": "gpt-4o"
}
```

### Update Image Generation Config

`POST /api/config/image-generation`

Request body:
```json
{
  "use_gpt4o_images": true // or false to use only DALL-E
}
```

## Architecture

The LinkedIn Content Generation System consists of the following components:

1. **LinkedInContentGenerator**: Core class for generating posts and images
2. **Schedule Mechanism**: Handles automatic generation at scheduled times
3. **API Endpoints**: Interface for managing content through the dashboard
4. **Storage System**: JSON and image storage for generated content
5. **Configuration**: Central config for all generation parameters

## Workflow

1. The scheduler triggers content generation at configured times
2. The system collects recent news/data or uses the most recent report
3. Different prompts are created based on post type
4. OpenAI generates the post text with appropriate structure 
5. DALL-E generates a custom image based on the post content
6. The complete post is stored as JSON with the image path
7. Posts are available through the API and dashboard

## Dashboard Integration

The LinkedIn Content section is accessible through the dashboard, allowing users to:

1. View all generated posts with filtering and search capabilities
2. Filter by post type (general, market update, sector focus, etc.)
3. Preview images and post content
4. Generate new posts on demand with customization options
5. Download posts as markdown files
6. Configure image generation models (GPT-4o vs DALL-E)

### Dashboard Features

The LinkedIn Content dashboard tab includes:

1. **Content Generation**: Create new LinkedIn posts with various options
2. **Post Filtering**: Filter by post type, search by content
3. **Post Management**: View, download, and manage existing posts
4. **Image Generation Settings**: Toggle between GPT-4o and DALL-E for image generation
5. **Pagination**: Navigate through multiple pages of posts
6. **Detailed View**: View complete post details, including image generation method

### Generating Content

To generate new LinkedIn content from the dashboard:

1. Click the "Generate New Content" button
2. Select the post type (General, Market Update, Sector Focus, etc.)
3. Choose a client focus (UAE, Saudi Arabia, etc.)
4. Optionally enter custom content as a base for generation
5. Optionally customize image generation settings:
   - Toggle custom image prompt
   - Specify image style (Natural or Vivid)
6. Click "Generate LinkedIn Content"

The system will generate the post in the background, and it will appear in the post list when complete.

## Image Generation Models

The system supports two image generation approaches:

1. **GPT-4o Image Generation**: Leverages GPT-4o's image generation capabilities to create professional business imagery for LinkedIn posts. This is the primary method when enabled.

2. **DALL-E 3 Image Generation**: Used as a fallback when GPT-4o image generation is disabled or fails. DALL-E 3 provides high-quality, detailed images based on customized prompts.

You can toggle between these options in the dashboard settings or via the API. The system will automatically handle fallback to DALL-E if GPT-4o generation encounters any issues.

### Image Generation Process

For both models, the system:

1. Enhances the image prompt with business context and UAE/GCC elements
2. Generates a unique filename for the image
3. Requests the image from the selected model
4. Saves the image to disk with appropriate metadata
5. Associates the image with the LinkedIn post
6. Records which model generated the image for analytics

## Troubleshooting

Common issues and solutions:

1. **No Posts Generated**: Check OpenAI API key, Redis connectivity, and logs for errors
2. **Missing Images**: Verify DALL-E access and check image generation logs
3. **Scheduler Not Running**: Ensure the scheduler process is active and properly configured
4. **Poor Content Quality**: Adjust prompts in the configuration file

## Extending the System

To extend the system:

1. **Add New Post Types**: Update the config file and add templates
2. **Custom Image Generation**: Modify the image prompts in the config
3. **Direct LinkedIn Integration**: Could be added using LinkedIn API
4. **Pre-Approval Workflow**: Could be implemented to review posts before publishing 